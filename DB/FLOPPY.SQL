DROP DATABASE IF EXISTS Floppy;
CREATE DATABASE Floppy DEFAULT CHARACTER SET utf8;
USE Floppy;

CREATE TABLE CAR(
	id_car MEDIUMINT AUTO_INCREMENT,
	let_car VARCHAR(100) NOT NULL,
	est_car BIT,
	PRIMARY KEY (id_car)
);
CREATE TABLE ADMIN(
	id_adm MEDIUMINT AUTO_INCREMENT,
	nom_adm VARCHAR(100) NOT NULL,
	pas_adm VARCHAR(100) NOT NULL,
	cor_adm VARCHAR(100) NOT NULL,
	PRIMARY KEY (id_adm)
);
CREATE TABLE HABITANTE(
	id_usu MEDIUMINT AUTO_INCREMENT,
	nom_usu VARCHAR(100) NOT NULL,
	pas_usu VARCHAR(100) NOT NULL,
	id_car MEDIUMINT NOT NULL,
	mar_car VARCHAR(100) NOT NULL,
	PRIMARY KEY (id_usu),
	FOREIGN KEY (id_car) REFERENCES CAR(id_car) ON DELETE CASCADE	
);
CREATE TABLE VIGILANTE(
	id_vig MEDIUMINT AUTO_INCREMENT,
	nom_vig VARCHAR(100) NOT NULL,
	pas_vig VARCHAR(100) NOT NULL,
	cor_vig VARCHAR(100) NOT NULL,
	dir_vig VARCHAR(100) NOT NULL,
	PRIMARY KEY (id_vig)
);
CREATE TABLE FRACCIONAMIENTO(
	id_fra MEDIUMINT AUTO_INCREMENT,
	dir_fra VARCHAR(100) NOT NULL,
	cap_fra INT NOT NULL,
	id_vig MEDIUMINT,
	id_usu MEDIUMINT,
	PRIMARY KEY (id_fra),
	FOREIGN KEY (id_usu) REFERENCES HABITANTE(id_usu) ON DELETE CASCADE,	
	FOREIGN KEY (id_vig) REFERENCES VIGILANTE(id_vig) ON DELETE CASCADE
);
INSERT INTO ADMIN(nom_adm,pas_adm,cor_adm) VALUES(
	'Mauricio','U2FsdGVkX1+QTw2RuHGTeZso5eaWqcKM8IHjbWsOCpc=','mauricioruiz01@live.com');